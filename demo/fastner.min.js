(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const fastn=require("fastn")({text:require("fastn/textComponent"),list:require("fastn/listComponent"),templater:require("fastn/templaterComponent"),_generic:require("fastn/genericComponent")});module.exports={fastn:fastn,mutate:fastn.Model,binding:fastn.binding};

},{"fastn":14,"fastn/genericComponent":13,"fastn/listComponent":16,"fastn/templaterComponent":19,"fastn/textComponent":20}],2:[function(require,module,exports){
const{fastn:fastn,binding:binding,mutate:mutate}=require("./fastn");function fetchAttributes(node){return node?Array.prototype.reduce.call(node.attributes,function(list,attribute){return attribute.value.startsWith("binding(")?list[attribute.name]=eval(attribute.value):list[attribute.name]=attribute.value,list},{}):{}}function createChild(child,children){const attributes=fetchAttributes(child);return attributes.list?(attributes.items=eval(attributes.list),attributes.template=(()=>objectToFastn(Array.from(child.childNodes).find(t=>"#text"!==t.nodeName))),fastn("list:"+child.tagName,attributes)):"text"===child.tagName?fastn("text",{text:eval(attributes.data)}):fastn(child.tagName,attributes,...children)}function objectToFastn(t){const e=Array.from(t.childNodes).map(t=>"#text"===t.nodeName?fastn("text",{text:t.data}):t.childNodes.length>0?objectToFastn(t):createChild(t,[t.textContent]));return createChild(t,e)}function fastner(t,e){const a=objectToFastn((new DOMParser).parseFromString(`<${t.tagName}>${t.innerHTML}</${t.tagName}>`,"text/xml").childNodes[0]).attach(e);a.render(),t.replaceWith(a.element)}window.fastn=fastn,window.mutate=mutate,window.binding=binding,window.fastner=fastner;

},{"./fastn":1}],3:[function(require,module,exports){
module.exports=function(n){var t=[];return function(i){if(!arguments.length)return t.join(" ");var r=function n(t,i){return"string"==typeof i&&i.match(/\s/)&&(i=i.split(" ")),Array.isArray(i)?t.concat(i.reduce(n,[])):(null!=i&&""!==i&&"boolean"!=typeof i&&t.push(String(i).trim()),t)}([],i),a=n.className?n.className.split(" "):[];t.map(function(n){if(n){var t=a.indexOf(n);~t&&a.splice(t,1)}}),t.join()!==r.join()&&(a=a.concat(r),t=r,n.className=a.join(" "))}};

},{}],4:[function(require,module,exports){
var clone=function(){"use strict";function e(t,n,o,f){"object"==typeof n&&(o=n.depth,f=n.prototype,n.filter,n=n.circular);var u=[],i=[],c="undefined"!=typeof Buffer;return void 0===n&&(n=!0),void 0===o&&(o=1/0),function t(o,l){if(null===o)return null;if(0==l)return o;var a,p;if("object"!=typeof o)return o;if(e.__isArray(o))a=[];else if(e.__isRegExp(o))a=new RegExp(o.source,r(o)),o.lastIndex&&(a.lastIndex=o.lastIndex);else if(e.__isDate(o))a=new Date(o.getTime());else{if(c&&Buffer.isBuffer(o))return a=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(a),a;void 0===f?(p=Object.getPrototypeOf(o),a=Object.create(p)):(a=Object.create(f),p=f)}if(n){var s=u.indexOf(o);if(-1!=s)return i[s];u.push(o),i.push(a)}for(var y in o){var b;p&&(b=Object.getOwnPropertyDescriptor(p,y)),b&&null==b.set||(a[y]=t(o[y],l-1))}return a}(t,o)}function t(e){return Object.prototype.toString.call(e)}function r(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=function(e){return"object"==typeof e&&"[object Date]"===t(e)},e.__isArray=function(e){return"object"==typeof e&&"[object Array]"===t(e)},e.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===t(e)},e.__getRegExpFlags=r,e}();"object"==typeof module&&module.exports&&(module.exports=clone);

},{}],5:[function(require,module,exports){
function compare(r,e,n){var t=typeof r;if(t!==typeof e)return!1;if(null==r||null==e||"object"!==t&&"function"!==t)return!("number"!==t||!isNaN(r)||!isNaN(e))||r===e;if(Array.isArray(r)!==Array.isArray(e))return!1;var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;var f=!0;return n||(n=new Set),i.forEach(function(t){if(t in e){if(r[t]&&r[t]instanceof Object){if(n.has(r[t]))return;n.add(r[t])}compare(r[t],e[t],n)||(f=!1)}else f=!1}),f}module.exports=function(r,e){return compare(r,e)};

},{}],6:[function(require,module,exports){
(function (global){
var EventEmitter=require("events").EventEmitter,isInstance=require("is-instance");function createPool(t,e,n){var r=[],i=-1,o=0,a=0;return{size:function(){return r.length},created:function(){return o},disposed:function(){return a},get:function(){if(i>=0){var t=r[i];return r[i]=null,i--,t}return o++,e()},dispose:function(e){a++,n(e),i>=r.length&&(r=r.concat(new Array(t))),r[++i]=e}}}var setPool=createPool(1e3,function(){return new Set},function(t){t.clear()}),emitKeyPool=createPool(10,function(){return new Map},function(t){t.forEach(setPool.dispose),t.clear()});function toArray(t){return Array.prototype.slice.call(t)}var deepRegex=/[|.]/i;function matchDeep(t){return(t+"").match(deepRegex)}function isWildcardPath(t){return~(t+"").indexOf("*")}function getTargetKey(t){return(t+"").split("|").shift()}var eventSystemVersion=1,globalKey="_entiEventState"+eventSystemVersion,globalState=global[globalKey]=global[globalKey]||{instances:[],getPoolInfo:function(){return["setPool",setPool.size(),"created",setPool.created(),"disposed",setPool.disposed(),"emitKeyPool",emitKeyPool.size(),"created",emitKeyPool.created(),"disposed",emitKeyPool.disposed()]}},modifiedEnties=globalState.modifiedEnties_v6=globalState.modifiedEnties_v6||setPool.get(),trackedObjects=globalState.trackedObjects_v6=globalState.trackedObjects_v6||new WeakMap,trackedHandlers=globalState.trackedHandlers_v6=globalState.trackedHandlers_v6||new WeakMap;function leftAndRest(t){var e=t+"";if(".|"===e.slice(0,2))return[".",e.slice(2)];var n=matchDeep(e);return n?[e.slice(0,n.index),e.slice(n.index+1)]:e}function isWildcardKey(t){return"*"===t.charAt(0)}function isFeralcardKey(t){return"**"===t}function addHandler(t,e,n,r){var i=trackedObjects.get(t),o=trackedHandlers.get(r);if(null==i&&(i={},trackedObjects.set(t,i)),null==o&&(o=new WeakMap,trackedHandlers.set(r,new WeakMap)),null==o.get(t)&&o.set(t,setPool.get()),!o.get(t).has(e)){var a=i[e];a||(a=setPool.get(),i[e]=a),a.add(n),o.get(t).add(e)}}function removeHandler(t,e,n,r){var i=trackedObjects.get(t),o=trackedHandlers.get(r);if(null!=i&&null!=o&&null!=o.get(t)&&o.get(t).has(e)){var a=i[e];if(a){a.delete(n),0===a.size&&(setPool.dispose(a),delete i[e]);var s=o.get(t);s.delete(e),0===s.size&&(setPool.dispose(s),o.delete(t))}}}function trackObjects(t,e,n,r,i,o){if(r&&"object"==typeof r){var a=r[i];a&&"object"==typeof a&&e.has(a)||trackObject(t,e,n,r,i,o)}}function trackKeys(t,e,n,r,i,o){for(var a=Object.keys(r),s=0;s<a.length;s++)isFeralcardKey(i)?trackObjects(t,e,n,r,a[s],"**"+(o?".":"")+(o||"")):trackObjects(t,e,n,r,a[s],o)}function trackObject(t,e,n,r,i,o){var a="**"===i?"*":i,s=r[i],c=s&&"object"==typeof s,l=function(d,f){if("*"!==a&&"object"==typeof r[a]&&r[a]!==s)return c&&e.delete(s),removeHandler(r,a,l,n),void trackObjects(t,e,n,r,i,o);"*"===a&&trackKeys(t,e,n,r,i,o),e.has(r)&&("**"===i&&o||n(d,f))};if(addHandler(r,a,l,n),c&&(e.add(s),o)){var d,f,u=leftAndRest(o);Array.isArray(u)?(d=u[0],f=u[1],"."===d&&(d="*")):d=u,c&&isWildcardKey(d)&&trackKeys(t,e,n,s,d,f),trackObjects(t,e,n,s,d,f)}}function emitForEnti(t,e,n,r,i,o){var a=r.get(n);if(a||(a=setPool.get(),r.set(n,a)),!a.has(o)){if(!t.trackedObjects.has(o._model))return t.entis.delete(o),void(0===t.entis.size&&delete e[n]);a.add(o);var s=getTargetKey(n),c=isWildcardPath(s)?void 0:o.get(s);o.emit(n,c,i)}}var trackedEvents=new WeakMap;function createHandler(t,e,n,r){return function(t,i){n.entis.forEach(emitForEnti.bind(null,n,e,r,i,t))}}var internalEvents=["newListener","attach","detached","destroy"];function isInternalEvent(t,e){return~internalEvents.indexOf(e)&&t._events&&t._events[e]&&(!Array.isArray(t._events[e])||1===t._events[e].length)}function trackPath(t,e){if(!isInternalEvent(t,e)){var n=t._model,r=trackedEvents.get(n);r||(r={},trackedEvents.set(n,r));var i=r[e];if(i){if(i.entis.has(t))return}else i={entis:setPool.get(),trackedObjects:new WeakSet},r[e]=i;i.entis.add(t);var o=createHandler(t,r,i,e);trackObjects(e,i.trackedObjects,o,{model:n},"model",e)}}function trackPaths(t){if(t._events&&t._model){for(var e in t._events)trackPath(t,e);modifiedEnties.delete(t)}}function emitEvent(t,e,n,r){modifiedEnties.forEach(trackPaths);var i=trackedObjects.get(t);if(i){var o={value:n,key:e,object:t};i[e]&&i[e].forEach(a),i["*"]&&i["*"].forEach(a)}function a(t){t(o,r)}}function emit(t){var e=emitKeyPool.get();t.forEach(function(t){emitEvent(t[0],t[1],t[2],e)}),emitKeyPool.dispose(e)}function onNewListener(){modifiedEnties.add(this)}function modelRemove(t,e,n){Array.isArray(t)?(t.splice(n,1),e.push([t,"length",t.length])):(delete t[n],e.push([t,n]))}function Enti(t){if(!(this instanceof Enti))return new Enti(t);var e=!1===t;(!t||"object"!=typeof t&&"function"!=typeof t)&&(t={}),e?this._model={}:this.attach(t),this.on("newListener",onNewListener)}Enti.emit=function(t,e,n){"object"!=typeof t&&"function"!=typeof t||emit([[t,e,n]])},Enti.get=function(t,e){if(t&&"object"==typeof t){if("."===(e=getTargetKey(e)))return t;var n=leftAndRest(e);return Array.isArray(n)?Enti.get(t[n[0]],n[1]):t[e]}},Enti.set=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e=getTargetKey(e));if(Array.isArray(r))return Enti.set(t[r[0]],r[1],n);var i=t[e];if("object"==typeof n||n!==i){var o=!(e in t);t[e]=n;var a=[[t,e,n]];o&&Array.isArray(t)&&a.push([t,"length",t.length]),emit(a)}}},Enti.push=function(t,e,n){if(t&&"object"==typeof t){var r;if(arguments.length<3)n=e,e=".",r=t;else{var i=leftAndRest(e);if(Array.isArray(i))return Enti.push(t[i[0]],i[1],n);r=t[e]}if(!Array.isArray(r))throw new Error("The target is not an array.");r.push(n),emit([[r,r.length-1,n],[r,"length",r.length]])}},Enti.insert=function(t,e,n,r){if(t&&"object"==typeof t){var i;if(arguments.length<4)r=n,n=e,e=".",i=t;else{var o=leftAndRest(e);if(Array.isArray(o))return Enti.insert(t[o[0]],o[1],n,r);i=t[e]}if(!Array.isArray(i))throw new Error("The target is not an array.");i.splice(r,0,n),emit([[i,r,n],[i,"length",i.length]])}},Enti.remove=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e);if(Array.isArray(r))return Enti.remove(t[r[0]],r[1],n);if(null==n){if("."===e)throw new Error(". (self) is not a valid key to remove");var i=[];modelRemove(t,i,e),emit(i)}else Enti.remove(t[e],n)}},Enti.move=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e);if(Array.isArray(r))return Enti.move(t[r[0]],r[1],n);if(e!==n){if(!Array.isArray(t))throw new Error("The model is not an array.");var i=t[e];t.splice(e,1),t.splice(n,0,i),emit([[t,n,i]])}}},Enti.update=function(t,e,n,r){if(t&&"object"==typeof t){var i,o=Array.isArray(n),a=[],s=new WeakSet;if("object"==typeof e)r=n,n=e,e=".",i=t;else{var c=leftAndRest(e);if(Array.isArray(c))return Enti.update(t[c[0]],c[1],n);e in t||(t[e]=o?[]:{},a.push([t,e,i])),i=t[e]}if("object"!=typeof n)throw new Error("The value is not an object.");if("object"!=typeof i)throw new Error("The target is not an object.");!function t(e,n){for(var i in n){var o=e[i],c=n[i];!(c&&"object"==typeof c&&o instanceof Object)||s.has(o)||o instanceof Date?(e[i]=c,a.push([e,i,c])):(s.add(o),t(o,c))}if(r&&"morph"===r.strategy)for(var i in e)i in n||modelRemove(e,a,i);Array.isArray(e)&&a.push([e,"length",e.length])}(i,n),emit(a)}},Enti.prototype=Object.create(EventEmitter.prototype),Enti.prototype._maxListeners=1e3,Enti.prototype.constructor=Enti,Enti.prototype.attach=function(t){if(this._model!==t){if(this.detach(),t&&!isInstance(t))throw new Error("Entis may only be attached to an object, or null/undefined");modifiedEnties.add(this),this._attached=!0,this._model=t,this.emit("attach",t)}},Enti.prototype.detach=function(){this._attached&&(modifiedEnties.delete(this),this._model={},this._attached=!1,this.emit("detach"))},Enti.prototype.destroy=function(){this.detach(),this.emit("destroy"),this._events=void 0},Enti.prototype.get=function(t){return Enti.get(this._model,t)},Enti.prototype.set=function(t,e){return Enti.set(this._model,t,e)},Enti.prototype.push=function(t,e){return Enti.push.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.insert=function(t,e,n){return Enti.insert.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.remove=function(t,e){return Enti.remove.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.move=function(t,e){return Enti.move.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.update=function(t,e){return Enti.update.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.isAttached=function(){return this._attached},Enti.prototype.attachedCount=function(){return modifiedEnties.size},Enti.isEnti=function(t){return t&&!!~globalState.instances.indexOf(t.constructor)},Enti.store=function(t,e,n){if(arguments.length<2)return Enti.get(t,e);Enti.set(t,e,n)},Enti.create=function(t){var e=new Enti;return e.handlers=t,Object.keys(t).forEach(function(n){e.on(n,t[n])}),e},globalState.instances.push(Enti),module.exports=Enti;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"events":7,"is-instance":23}],7:[function(require,module,exports){
var objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var hasDefineProperty,defaultMaxListeners=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(e){hasDefineProperty=!1}function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function emitNone(e,t,n){if(t)e.call(n);else for(var r=e.length,i=arrayClone(e,r),s=0;s<r;++s)i[s].call(n)}function emitOne(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].call(n,r)}function emitTwo(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=arrayClone(e,s),a=0;a<s;++a)o[a].call(n,r,i)}function emitThree(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=arrayClone(e,o),l=0;l<o;++l)a[l].call(n,r,i,s)}function emitMany(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].apply(n,r)}function _addListener(e,t,n,r){var i,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=objectCreate(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=$getMaxListeners(e))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else o=s[t]=n,++e._eventsCount;return e}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=bind.call(onceWrapper,r);return i.listener=n,r.wrapFn=i,i}function _listeners(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?unwrapListeners(i):arrayClone(i,i.length):[]}function listenerCount(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function spliceOne(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function arrayClone(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function objectCreatePolyfill(e){var t=function(){};return t.prototype=e,new t}function objectKeysPolyfill(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n}function functionBindPolyfill(e){var t=this;return function(){return t.apply(e,arguments)}}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=e}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(e){var t,n,r,i,s,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:emitNone(n,u,this);break;case 2:emitOne(n,u,this,arguments[1]);break;case 3:emitTwo(n,u,this,arguments[1],arguments[2]);break;case 4:emitThree(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];emitMany(n,u,this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=objectCreate(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():spliceOne(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=objectCreate(null):delete n[e]),this;if(0===arguments.length){var i,s=objectKeys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};

},{}],8:[function(require,module,exports){
var is=require("./is"),GENERIC="_generic",EventEmitter=require("events").EventEmitter,slice=Array.prototype.slice;function flatten(t){return Array.isArray(t)?t.reduce(function(t,n){return null==n?t:t.concat(flatten(n))},[]):t}function attachProperties(t,n){for(var e in this._properties)this._properties[e].attach(t,n)}function onRender(){for(var t in this.attach(void 0,0),this._properties)this._properties[t].update()}function detachProperties(t){for(var n in this._properties)this._properties[n].detach(t)}function destroyProperties(){for(var t in this._properties)this._properties[t].destroy()}function clone(){return this.fastn(this.component._type,this.component._settings,this.component._children.filter(function(t){return!t._templated}).map(function(t){return"object"==typeof t?t.clone():t}))}function getSetBinding(t){return arguments.length?(is.binding(t)||(t=this.fastn.binding(t)),this.binding&&this.binding!==t&&(this.binding.removeListener("change",this.emitAttach),t.attach(this.binding._model,this.binding._firm)),this.binding=t,this.binding.on("change",this.emitAttach),this.binding.on("detach",this.emitDetach),this.emitAttach(),this.component):this.binding}function emitAttach(){var t=this.binding();t!==this.lastBound&&(this.lastBound=t,this.scope.attach(this.lastBound),this.component.emit("attach",this.scope,1))}function emitDetach(){this.component.emit("detach",1)}function getScope(){return this.scope}function destroy(){if(!this.destroyed)return this.destroyed=!0,this.component.removeAllListeners("render").removeAllListeners("attach"),this.component.emit("destroy"),this.component.element=null,this.scope.destroy(),this.binding.destroy(!0),this.component}function attachComponent(t,n){return this.binding.attach(t,n),this.component}function detachComponent(t){return this.binding.detach(t),this.component}function isDestroyed(){return this.destroyed}function setProperty(t,n){return n||(n=this.component[t]||this.fastn.property()),this.component[t]=n,this.component._properties[t]=n,this.component}function bindInternalProperty(t,n,e,i){e in t||t.setProperty(e),t[e].on("change",function(t){n.set(e,i?i(t):t)})}function createInternalScope(t,n){var e=this,i=new e.fastn.Model(t);for(var o in t)bindInternalProperty(e.component,i,o,n[o]);return{binding:function(){return e.fastn.binding.apply(null,arguments).attach(i)},model:i}}function extendComponent(t,n,e){var i=this.component;if(t in this.types)return i;if(t in this.fastn.components)i=this.fastn.components[t](this.fastn,this.component,t,n,e,createInternalScope.bind(this));else{if(!(GENERIC in this.fastn.components))throw new Error('No component of type "'+t+'" is loaded');(i=this.fastn.components._generic(this.fastn,this.component,t,n,e,createInternalScope.bind(this)))&&(this.types._generic=!0)}return i&&(this.types[t]=!0),i}function isType(t){return t in this.types}function FastnComponent(t,n,e,i){var o=this,s={types:{},fastn:t,component:o,binding:t.binding("."),destroyed:!1,scope:new t.Model(!1),lastBound:null};s.emitAttach=emitAttach.bind(s),s.emitDetach=emitDetach.bind(s),s.binding._default_binding=!0,o._type=n,o._properties={},o._settings=e||{},o._children=i?flatten(i):[],o.attach=attachComponent.bind(s),o.detach=detachComponent.bind(s),o.scope=getScope.bind(s),o.destroy=destroy.bind(s),o.destroyed=isDestroyed.bind(s),o.binding=getSetBinding.bind(s),o.setProperty=setProperty.bind(s),o.clone=clone.bind(s),o.children=slice.bind(o._children),o.extend=extendComponent.bind(s),o.is=isType.bind(s),o.binding(s.binding),o.on("attach",attachProperties.bind(this)),o.on("render",onRender.bind(this)),o.on("detach",detachProperties.bind(this)),o.on("destroy",destroyProperties.bind(this)),t.debug&&o.on("render",function(){o.element&&"object"==typeof o.element&&(o.element._component=o)})}FastnComponent.prototype=Object.create(EventEmitter.prototype),FastnComponent.prototype.constructor=FastnComponent,FastnComponent.prototype._fastn_component=!0,module.exports=FastnComponent;

},{"./is":15,"events":7}],9:[function(require,module,exports){
var is=require("./is"),firmer=require("./firmer"),functionEmitter=require("function-emitter"),setPrototypeOf=require("setprototypeof"),same=require("same-value");function noop(t){return t}function fuseBinding(){var t,i,n,e=this,d=Array.prototype.slice.call(arguments),a=d.slice(),r=a.pop(),o=createBinding.call(e,"result");function h(){i||o(r.apply(null,a.map(function(t){return t()})))}return o._arguments=d,"function"!=typeof a[a.length-1]||is.binding(a[a.length-1])||(t=r,r=a.pop()),o._model.removeAllListeners(),o._set=function(n){if(t){i=!0;var e=t(n);same(e,a[0]())||(a[0](e),o._change(e)),i=!1}else o._change(n)},o.on("detach",function(t){a.forEach(function(i,n){i.detach(t)})}),o.once("destroy",function(t){a.forEach(function(i,n){i.removeListener("change",h),i.destroy(t)})}),a.forEach(function(t,i){is.binding(t)||(t=createBinding.call(e,t),a.splice(i,1,t)),t.on("change",h)}),o.on("attach",function(t){i=!0,a.forEach(function(i){i.attach(t,1)}),i=!1,n!==t&&h(),n=t}),o}function createValueBinding(t){var i=createBinding.call(t,"value");return i.attach=function(){return i},i.detach=function(){return i},i}function bindingTemplate(t){return arguments.length?"."!==this.binding._fastn_binding?(this.binding._set(t),this.binding):void 0:this.value}function modelAttachHandler(t){this.binding._model.attach(t),this.binding._change(this.binding._model.get(this.path)),this.binding.emit("attach",t,1)}function modelDetachHandler(){this.binding._model.detach()}function attach(t,i){var n=this.binding;if(firmer(n,i))return n;n._firm=i;var e=this.fastn.isModel(t);return e&&this.attachedModel===t?n:(this.attachedModel&&(this.attachedModel.removeListener("attach",this.modelAttachHandler),this.attachedModel.removeListener("detach",this.modelDetachHandler),this.attachedModel=null),e&&(this.attachedModel=t,this.attachedModel.on("attach",this.modelAttachHandler),this.attachedModel.on("detach",this.modelDetachHandler),t=t._model),t instanceof Object||(t={}),n._model._model===t?n:(this.modelAttachHandler(t),n))}function detach(t){return firmer(this.binding,t)?this.binding:(this.value=void 0,this.binding._model.isAttached()&&this.binding._model.detach(),this.binding.emit("detach",1),this.binding)}function set(t){same(this.binding._model.get(this.path),t)||(this.binding._model.isAttached()||this.binding._model.attach(this.binding._model.get(".")),this.binding._model.set(this.path,t))}function change(t){this.value=t,this.binding.emit("change",this.binding())}function clone(t){var i=createBinding.apply(this.fastn,this.binding._arguments);return t&&i.attach(this.attachedModel||this.binding._model._model,this.binding._firm),i}function destroy(t){this.isDestroyed||t||(this.isDestroyed=!0,this.binding.emit("destroy",!0),this.binding.detach(),this.binding._model.destroy())}function destroyed(){return this.isDestroyed}function createBinding(t,i){if(i)return fuseBinding.apply(this,arguments);if(is.binding(t))return createBinding.call(this,t,noop);if(null==t)return createValueBinding(this);var n={fastn:this,path:t},e=n.binding=bindingTemplate.bind(n);return setPrototypeOf(e,functionEmitter),e.setMaxListeners(1e4),e._arguments=[t],e._model=new this.Model(!1),e._fastn_binding=t,e._firm=-1/0,n.modelAttachHandler=modelAttachHandler.bind(n),n.modelDetachHandler=modelDetachHandler.bind(n),e.attach=attach.bind(n),e.detach=detach.bind(n),e._set=set.bind(n),e._change=change.bind(n),e.clone=clone.bind(n),e.destroy=destroy.bind(n),e.destroyed=destroyed.bind(n),"."!==t&&e._model.on(t,e._change),e}function from(t){if(is.binding(t))return t;var i=this();return i(t),i}module.exports=function(t){var i=createBinding.bind(t);return i.from=from.bind(i),i};

},{"./firmer":12,"./is":15,"function-emitter":22,"same-value":27,"setprototypeof":29}],10:[function(require,module,exports){
function insertChild(e,n,t,i){if(null!=t&&!1!==t){var r=n._children.indexOf(t),l=e.toComponent(t);l!==t&&~r&&n._children.splice(r,1,l),~r&&l===t||l.attach(n.scope(),1),r!==i&&(~r&&n._children.splice(r,1),n._children.splice(i,0,l)),n.element&&(l.element||l.render(),n._insert(l.element,i),l.emit("insert",n),n.emit("childInsert",l))}}function getContainerElement(){return this.containerElement||this.element}function insert(e,n){var t=e,i=this.container,r=this.fastn;if(n&&"object"==typeof n&&(t=Array.prototype.slice.call(arguments)),isNaN(n)&&(n=i._children.length),Array.isArray(t))for(var l=0;l<t.length;l++)i.insert(t[l],l+n);else insertChild(r,i,t,n);return i}module.exports=function(e,n,t,i,r){return n.insert=insert.bind({container:n,fastn:e}),n._insert=function(e,t){var i=n.getContainerElement();i&&i.childNodes[t]!==e&&i.insertBefore(e,i.childNodes[t])},n.remove=function(e){var t=n._children.indexOf(e);~t&&n._children.splice(t,1),e.detach(1),e.element&&(n._remove(e.element),e.emit("remove",n)),n.emit("childRemove",e)},n._remove=function(e){var t=n.getContainerElement();e&&t&&e.parentNode===t&&t.removeChild(e)},n.empty=function(){for(;n._children.length;)n.remove(n._children.pop())},n.replaceChild=function(e,t){var i=n._children.indexOf(e);~i&&(n.remove(e),n.insert(t,i))},n.getContainerElement=getContainerElement.bind(n),n.on("render",n.insert.bind(null,n._children,0)),n.on("attach",function(t,i){for(var r=0;r<n._children.length;r++)e.isComponent(n._children[r])&&n._children[r].attach(t,i)}),n.on("destroy",function(t,i){for(var r=0;r<n._children.length;r++)e.isComponent(n._children[r])&&n._children[r].destroy(i)}),n};

},{}],11:[function(require,module,exports){
var setify=require("setify"),classist=require("classist");function updateTextProperty(e,t,n){if(2===arguments.length)return t.textContent;t.textContent=null==n?"":n}module.exports={class:function(e,t,n){if(e._classist||(e._classist=classist(t)),arguments.length<3)return e._classist();e._classist(n)},display:function(e,t,n){if(2===arguments.length)return"none"!==t.style.display;t.style.display=n?null:"none"},disabled:function(e,t,n){if(2===arguments.length)return t.hasAttribute("disabled");n?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")},textContent:updateTextProperty,innerText:updateTextProperty,innerHTML:function(e,t,n){if(2===arguments.length)return t.innerHTML;t.innerHTML=null==n?"":n},value:function(e,t,n){var l=t.type;return"INPUT"===t.nodeName&&"date"===l?2===arguments.length?t.value?new Date(t.value.replace(/-/g,"/").replace("T"," ")):null:void(!(n=null!=n?new Date(n):null)||isNaN(n)?t.value=null:t.value=[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-")):2===arguments.length?t.value:(void 0===n&&(n=null),"PROGRESS"===t.nodeName&&(n=parseFloat(n)||0),void setify(t,n))},max:function(e,t,n){if(2===arguments.length)return t.value;"PROGRESS"===t.nodeName&&(n=parseFloat(n)||0),t.max=n},style:function(e,t,n){if(2===arguments.length)return t.style;for(var l in"string"==typeof n&&(t.style=n),n)t.style[l]=n[l]},type:function(e,t,n){if(2===arguments.length)return t.type;t.setAttribute("type",n)}};

},{"classist":3,"setify":28}],12:[function(require,module,exports){
module.exports=function(i,r){if(null!=r&&(void 0===i._firm||r<i._firm))return!0};

},{}],13:[function(require,module,exports){
(function (global){
var containerComponent=require("./containerComponent"),schedule=require("./schedule"),fancyProps=require("./fancyProps"),matchDomHandlerName=/^((?:el\.)?)([^. ]+)(?:\.(capture))?$/,GENERIC="_generic";function createProperties(e,t,n){for(var r in n){var o=n[r];("function"!=typeof o||e.isProperty(o)||e.isBinding(o))&&t.addDomProperty(r)}}function trackKeyEvents(e,t,n){"_lastStates"in e&&"charCode"in n&&(e._lastStates.unshift(t.value),e._lastStates.pop())}function addDomHandler(e,t,n,r,o){var i=n.split(".");"on"===i[0]&&i.shift();var a=function(r){trackKeyEvents(e,t,r),e.emit(n,r,e.scope())};t.addEventListener(r,a,o),e.on("destroy",function(){t.removeEventListener(r,a,o)})}function addDomHandlers(e,t,n){for(var r=n.split(" "),o=0;o<r.length;o++){var i=r[o].match(matchDomHandlerName);i&&((i[1]||"on"+i[2]in t)&&addDomHandler(e,t,n,i[2],i[3]))}}function addAutoHandler(e,t,n,r){if(r[n]){var o=n.slice(2),i=r[n];if(delete r[n],"function"==typeof i){var a=i;i=function(n){trackKeyEvents(e,t,n),a.call(e,n,e.scope())}}if("string"==typeof i){var s=i.split(":");i=function(n){var r=fancyProps[s[1]],o=r?r(e,t):t[s[1]];trackKeyEvents(e,t,n),e[s[0]](o)}}t.addEventListener(o,i),e.on("destroy",function(){t.removeEventListener(o,i)})}}function addDomProperty(e,t,n){var r,o=this;n=n||o[t]||e.property(),o.setProperty(t,n),n.updater(function e(){var i=o.getPropertyElement(t),a=n();if(i&&!o.destroyed()){if("value"===t&&o._lastStates&&~o._lastStates.indexOf(a))return clearTimeout(r),void(r=setTimeout(e,50));var s=t in i||!("getAttribute"in i),d=o._fancyProps&&o._fancyProps(t)||fancyProps[t],c=d?d(o,i):s?i[t]:i.getAttribute(t);if(d||s||null!=a||(a=""),a!==c){if(d)return void d(o,i,a);if(s)return void(i[t]=a);"function"!=typeof a&&"object"!=typeof a&&i.setAttribute(t,a)}}})}function onRender(){var e;for(var t in this._settings)e=this.getEventElement(t),"on"===t.slice(0,2)&&t in e&&addAutoHandler(this,e,t,this._settings);for(var n in this._events)addDomHandlers(this,e=this.getEventElement(t),n)}function render(){return this.element=this.element||this.createElement(this._settings.tagName||this._tagName),"value"in this.element&&(this._lastStates=new Array(2)),this.emit("render"),this}function genericComponent(e,t,n,r,o){return t.is(n)?t:(global.Element&&n instanceof global.Element&&(t.element=n,n=t.element.tagName),global.Node&&n instanceof global.Node?e("text",{text:n},n.textContent):"string"==typeof n?(t._tagName=n===GENERIC?t._tagName||"div":n,t.is(GENERIC)?t:(t.extend("_container",r,o),t.addDomProperty=addDomProperty.bind(t,e),t.getEventElement=t.getContainerElement,t.getPropertyElement=t.getContainerElement,t.updateProperty=genericComponent.updateProperty,t.createElement=genericComponent.createElement,createProperties(e,t,r),t.render=render.bind(t),t.on("render",onRender),t)):void 0)}genericComponent.updateProperty=function(e,t,n){"undefined"!=typeof document&&document.contains(e.element)?schedule(t,n):n()},genericComponent.createElement=function(e){return e instanceof Node?e:document.createElement(e)},module.exports=genericComponent;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./containerComponent":10,"./fancyProps":11,"./schedule":18}],14:[function(require,module,exports){
var createProperty=require("./property"),createBinding=require("./binding"),BaseComponent=require("./baseComponent"),Enti=require("enti"),objectAssign=require("object-assign"),is=require("./is");function inflateProperties(e,n){for(var t in n){var i=n[t],r=e[t];is.property(n[t])?(is.property(r)&&r.destroy(),i.addTo(e,t)):is.property(r)&&(is.binding(i)?r.binding(i):r(i),r.addTo(e,t))}}function validateExpectedComponents(e,n,t){(t=t.filter(function(n){return!(n in e)})).length&&console.warn(['fastn("'+n+'") uses some components that have not been registered with fastn',"Expected component constructors: "+t.join(", ")].join("\n\n"))}module.exports=function(e,n){if(!e||"object"!=typeof e)throw new Error("fastn must be initialised with a components object");function t(e){var n=Array.prototype.slice.call(arguments),i=n[1],r=2,o=t.toComponent(n[1]);(Array.isArray(n[1])||o||!n[1])&&(n.length>1&&(n[1]=o||n[1]),r--,i=null),i=objectAssign({},i||{});for(var s,a="string"==typeof e?e.split(":"):Array.isArray(e)?e:[e],p=n.slice(r),c=t.base(e,i,p);c&&(s=a.shift());)c=c.extend(s,i,p);if(c)return c._properties={},inflateProperties(c,i),c}for(var i in e._container=e._container||require("./containerComponent"),t.toComponent=function(e){if(null!=e&&!Array.isArray(e))return is.component(e)?e:"object"!=typeof e||e instanceof Date?t("text",{text:e},e):t(e)},t.debug=n,t.property=createProperty.bind(t),t.binding=createBinding(t),t.isComponent=is.component,t.isBinding=is.binding,t.isDefaultBinding=is.defaultBinding,t.isBindingObject=is.bindingObject,t.isProperty=is.property,t.components=e,t.Model=Enti,t.isModel=Enti.isEnti.bind(Enti),t.base=function(e,n,i){return new BaseComponent(t,e,n,i)},e){var r=e[i];r.expectedComponents&&validateExpectedComponents(e,i,r.expectedComponents)}return t};

},{"./baseComponent":8,"./binding":9,"./containerComponent":10,"./is":15,"./property":17,"enti":6,"object-assign":26}],15:[function(require,module,exports){
var FUNCTION="function",OBJECT="object",FASTNBINDING="_fastn_binding",FASTNPROPERTY="_fastn_property",FASTNCOMPONENT="_fastn_component",DEFAULTBINDING="_default_binding";function isComponent(n){return n&&typeof n===OBJECT&&FASTNCOMPONENT in n}function isBindingObject(n){return n&&typeof n===OBJECT&&FASTNBINDING in n}function isBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n}function isProperty(n){return typeof n===FUNCTION&&FASTNPROPERTY in n}function isDefaultBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n&&DEFAULTBINDING in n}module.exports={component:isComponent,bindingObject:isBindingObject,binding:isBinding,defaultBinding:isDefaultBinding,property:isProperty};

},{}],16:[function(require,module,exports){
(function (global){
var MultiMap=require("multimap"),merge=require("flat-merge"),requestIdleCallback=global.requestIdleCallback||global.requestAnimationFrame||global.setTimeout;function each(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],r);else for(var n in e)t(e[n],n)}function keyFor(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){var r=e.indexOf(t);return r>=0&&r}for(var n in e)if(e[n]===t)return n;return!1}MultiMap.Map=Map,module.exports=function(e,t,r,n,o){e.components._generic?t.extend("_generic",n,o):t.extend("_container",n,o),"template"in n||console.warn('No "template" function was set for this templater component');var a,i,l=new MultiMap,s=new WeakMap,p={},m=[];function c(r,n,o){var a,i,m;return Array.isArray(n)&&n[0]===p&&(i=!0,a=n[2],n=n[1]),i?(m=s.get(a)).set("key",o):(m=new e.Model({item:n,key:o}),(a=e.toComponent(r(m,t.scope())))||(a=e("template")),a._listItem=n,a._templated=!0,s.set(a,m),l.set(n,a)),e.isComponent(a)&&!1!==t._settings.attachTemplates&&a.attach(m,2),a}function u(){m=[];var r=t.items(),n=t.template(),o=t.emptyTemplate(),s=t.insertionFrameTime()||1/0,u=a!==n,f=merge(n?r:[]);l.forEach(function(e,r){var n=keyFor(f,r);u||!1===n?(!function(e){t.remove(e),e.destroy()}(e),l.delete(r,e)):f[n]=[p,r,e]});var y=0,d=0;if(each(f,function(e,r){for(;y<t._children.length&&!t._children[y]._templated;)y++;m.push([e,r,y+d]),d++}),n&&function(e,r){i||(i=!0,t.emit("insertionStart",m.length),m.sort(function(e,t){return e[2]-t[2]}),function n(){for(var o=Date.now();m.length&&Date.now()-o<r;){var a=m.shift(),l=c(e,a[0],a[1]);t.insert(l,a[2])}if(!m.length||t.destroyed())return i=!1,void(t.destroyed()||t.emit("insertionComplete"));requestIdleCallback(n)}())}(n,s),a=n,0===d&&o){var h=e.toComponent(o(t.scope()));h||(h=e("template")),h._templated=!0,l.set({},h),t.insert(h)}}return t.setProperty("insertionFrameTime"),t.setProperty("items",e.property([],n.itemChanges||"type keys shallowStructure").on("change",u)),t.setProperty("template",e.property().on("change",u)),t.setProperty("emptyTemplate",e.property().on("change",u)),t};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"flat-merge":21,"multimap":24}],17:[function(require,module,exports){
var WhatChanged=require("what-changed"),same=require("same-value"),firmer=require("./firmer"),functionEmitter=require("function-emitter"),setPrototypeOf=require("setprototypeof"),propertyProto=Object.create(functionEmitter);function propertyTemplate(e){if(!arguments.length)return this.observable&&"function"==typeof this.observable&&this.observable()||this.property._value;if(!this.destroyed){if(this.observable)return"function"==typeof this.observable&&this.observable(e),this.property;this.valueUpdate(e)}return this.property}function changeChecker(e,t){if(t){t=new WhatChanged(e,t);return function(e){return t.update(e).any}}var r=e;return function(e){if(!same(r,e))return r=e,!0}}function propertyBinding(e){return arguments.length?("string"!=typeof e&&"number"!=typeof e||(e=this.fastn.binding(e)),e===this.observable?this.property:(this.observable&&this.observable.removeListener("change",this.valueUpdate),this.observable=e,this.model&&this.property.attach(this.model,this.property._firm),this.observable.on("change",this.valueUpdate),"function"==typeof this.observable?this.valueUpdate(this.observable()):this.valueUpdate(void 0),this.property)):this.observable}function attachProperty(e,t){return firmer(this.property,t)?this.property:(this.property._firm=t,e instanceof Object||(e={}),this.observable&&(this.model=e,this.observable.attach&&this.observable.attach(e,1)),this.property._events&&"attach"in this.property._events&&this.property.emit("attach",e,1),this.property)}function detachProperty(e){return firmer(this.property,e)?this.property:(this.observable&&(this.observable.removeListener("change",this.valueUpdate),this.observable.detach&&this.observable.detach(1),this.model=null),this.property._events&&"detach"in this.property._events&&this.property.emit("detach",1),this.property)}function updateProperty(){return this.destroyed||(this.property._update&&this.property._update(this.property._value,this.property),this.property.emit("update",this.property._value)),this.property}function propertyUpdater(e){return arguments.length?(this.property._update=e,this.property):this.property._update}function destroyProperty(){return this.destroyed||(this.destroyed=!0,this.property.removeAllListeners("change").removeAllListeners("update").removeAllListeners("attach"),this.property.emit("destroy"),this.property.detach(),this.observable&&this.observable.destroy&&this.observable.destroy(!0)),this.property}function propertyDestroyed(){return this.destroyed}function addPropertyTo(e,t){return e.setProperty(t,this.property),this.property}function createProperty(e,t,r){"function"==typeof t&&(r=t,t=null);var o={fastn:this,hasChanged:changeChecker(e,t)},i=propertyTemplate.bind(o);return o.valueUpdate=function(e){i._value=e,o.hasChanged(e)&&(i.emit("change",i._value),i.update())},(i=o.property=propertyTemplate.bind(o))._value=e,i._update=r,setPrototypeOf(i,propertyProto),i.binding=propertyBinding.bind(o),i.attach=attachProperty.bind(o),i.detach=detachProperty.bind(o),i.update=updateProperty.bind(o),i.updater=propertyUpdater.bind(o),i.destroy=destroyProperty.bind(o),i.destroyed=propertyDestroyed.bind(o),i.addTo=addPropertyTo.bind(o),i}propertyProto._fastn_property=!0,propertyProto._firm=1,module.exports=createProperty;

},{"./firmer":12,"function-emitter":22,"same-value":27,"setprototypeof":29,"what-changed":30}],18:[function(require,module,exports){
var scheduled,todo=[],todoKeys=[],updates=0;function run(){for(var e=Date.now();todo.length&&Date.now()-e<16;)todoKeys.shift(),todo.shift()();todo.length?requestAnimationFrame(run):scheduled=!1}function schedule(e,o){~todoKeys.indexOf(e)||(todo.push(o),todoKeys.push(e),scheduled||(scheduled=!0,requestAnimationFrame(run)))}module.exports=schedule;

},{}],19:[function(require,module,exports){
module.exports=function(e,t,n,o,r){var m=new e.Model({});function p(e){t.element&&t.element.parentNode&&t.element.parentNode.replaceChild(e,t.element),t.element=e}function c(){var n,o=t.data(),r=t.template();m.set("item",o),r&&(n=e.toComponent(r(m,t.scope(),t._currentComponent))),t._currentComponent&&t._currentComponent!==n&&e.isComponent(t._currentComponent)&&t._currentComponent.destroy(),t._currentComponent=n,n?e.isComponent(n)&&(!1!==t._settings.attachTemplates?n.attach(m,2):n.attach(t.scope(),1),t.element&&t.element!==n.element&&(null==n.element&&n.render(),p(t._currentComponent.element))):p(t.emptyElement)}return"template"in o||console.warn('No "template" function was set for this templater component'),t.render=function(){var e;return t.emptyElement=document.createTextNode(""),t._currentComponent&&(t._currentComponent.render(),e=t._currentComponent.element),t.element=e||t.emptyElement,t.emit("render"),t},t.setProperty("data",e.property(void 0,o.dataChanges||"value structure").on("change",c)),t.setProperty("template",e.property(void 0,"value reference").on("change",c)),t.on("destroy",function(){e.isComponent(t._currentComponent)&&t._currentComponent.destroy()}),t.on("attach",function(n){e.isComponent(t._currentComponent)&&t._currentComponent.attach(t.scope(),1)}),t};

},{}],20:[function(require,module,exports){
function updateText(){if(this.element){var e=this.text();this.element.data=null==e?"":e}}function autoRender(e){this.element=document.createTextNode(e)}function autoText(e,t,n){return e.render=autoRender.bind(e,n),e}function render(){this.element=this.createTextNode(this.text()),this.emit("render")}function textComponent(e,t,n,r,o){return t.createTextNode=textComponent.createTextNode,t.render=render.bind(t),t.setProperty("text",e.property("",updateText.bind(t))),t}textComponent.createTextNode=function(e){return document.createTextNode(e)},module.exports=textComponent;

},{}],21:[function(require,module,exports){
function flatMerge(e,t){t&&"object"==typeof t||(t={}),e&&"object"==typeof e||(e=new t.constructor);for(var o=new e.constructor,r=Object.keys(e),c=Object.keys(t),n=0;n<r.length;n++)o[r[n]]=e[r[n]];for(n=0;n<c.length;n++)o[c[n]]=t[c[n]];return o}module.exports=flatMerge;

},{}],22:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,functionEmitterPrototype=function(){};for(var key in EventEmitter.prototype)functionEmitterPrototype[key]=EventEmitter.prototype[key];module.exports=functionEmitterPrototype;

},{"events":7}],23:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o||"function"==typeof o};

},{}],24:[function(require,module,exports){
"use strict";function mapEach(t,e){for(var r,n=t.keys();!(r=n.next()).done;)e(t.get(r.value),r.value,t)}var Multimap=function(){var t,e;function r(e){var n=this;n._map=t,r.Map&&(n._map=r.Map),n._=n._map?new n._map:{},e&&e.forEach(function(t){n.set(t[0],t[1])})}"undefined"!=typeof Map&&(t=Map,Map.prototype.keys||(Map.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t})),r.prototype.get=function(t){return this._map?this._.get(t):this._[t]},r.prototype.set=function(t,e){var r=Array.prototype.slice.call(arguments);t=r.shift();var n=this.get(t);return n||(n=[],this._map?this._.set(t,n):this._[t]=n),Array.prototype.push.apply(n,r),this},r.prototype.delete=function(t,e){if(!this.has(t))return!1;if(1==arguments.length)return this._map?this._.delete(t):delete this._[t],!0;var r=this.get(t),n=r.indexOf(e);return-1!=n&&(r.splice(n,1),!0)},r.prototype.has=function(t,e){var r=this._map?this._.has(t):this._.hasOwnProperty(t);return 1!=arguments.length&&r?-1!=(this.get(t)||[]).indexOf(e):r},r.prototype.keys=function(){return this._map?n(this._.keys()):n(Object.keys(this._))},r.prototype.values=function(){var t=[];return this.forEachEntry(function(e){Array.prototype.push.apply(t,e)}),n(t)},r.prototype.forEachEntry=function(t){mapEach(this,t)},r.prototype.forEach=function(t){var e=this;e.forEachEntry(function(r,n){r.forEach(function(r){t(r,n,e)})})},r.prototype.clear=function(){this._map?this._.clear():this._={}},Object.defineProperty(r.prototype,"size",{configurable:!1,enumerable:!0,get:function(){var t=0;return mapEach(this,function(e){t+=e.length}),t}}),Object.defineProperty(r.prototype,"count",{configurable:!1,enumerable:!0,get:function(){return this._.size}});try{e=new Function("iterator","makeIterator","var keysArray = []; for(var key of iterator){keysArray.push(key);} return makeIterator(keysArray).next;")}catch(t){}function n(t){if(Array.isArray(t)){var r=0;return{next:function(){return r<t.length?{value:t[r++],done:!1}:{done:!0}}}}return!t.next&&e&&(t.next=e(t,n)),t}return r}();"object"==typeof exports&&module&&module.exports?module.exports=Multimap:"function"==typeof define&&define.amd&&define(function(){return Multimap});

},{}],25:[function(require,module,exports){
var supportedTypes=["textarea","text","search","tel","url","password"];module.exports=function(e){return!(!e.setSelectionRange||!~supportedTypes.indexOf(e.type))};

},{}],26:[function(require,module,exports){
"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){for(var s in t=Object(arguments[a]))hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],27:[function(require,module,exports){
module.exports=function(t,e){return t===e||typeof t==typeof e&&("object"!=typeof t||t instanceof Date&&e instanceof Date)&&String(t)===String(e)};

},{}],28:[function(require,module,exports){
var naturalSelection=require("natural-selection");module.exports=function(e,t){if(naturalSelection(e)&&e===document.activeElement){var n=e.selectionStart,l=e.selectionEnd;e.value=t,e.setSelectionRange(n,l)}else e.value=t};

},{"natural-selection":25}],29:[function(require,module,exports){
"use strict";function setProtoOf(t,r){return t.__proto__=r,t}function mixinProperties(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=r[o]);return t}module.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);

},{}],30:[function(require,module,exports){
var clone=require("clone"),deepEqual=require("cyclic-deep-equal");function keysAreDifferent(e,t){if(e!==t){if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0}}function getKeys(e){if(e&&"object"==typeof e)return Object.keys(e)}function WhatChanged(e,t){if(this._changesToTrack={},null==t&&(t="value type keys structure reference"),"string"!=typeof t)throw"changesToTrack must be of type string";t=t.split(" ");for(var n=0;n<t.length;n++)this._changesToTrack[t[n]]=!0;this.update(e)}WhatChanged.prototype.update=function(e){var t={},n=this._changesToTrack,r=getKeys(e);if("value"in n&&e+""!=this._lastReference+""&&(t.value=!0,t.any=!0),("type"in n&&typeof e!=typeof this._lastValue||(null===e||null===this._lastValue)&&this.value!==this._lastValue)&&(t.type=!0,t.any=!0),"keys"in n&&keysAreDifferent(this._lastKeys,getKeys(e))&&(t.keys=!0,t.any=!0),null!==e&&"object"==typeof e||"function"==typeof e){var s=this._lastValue;"shallowStructure"in n&&(!s||"object"!=typeof s||Object.keys(e).some(function(t,n){return e[t]!==s[t]}))&&(t.shallowStructure=!0,t.any=!0),"structure"in n&&!deepEqual(e,s)&&(t.structure=!0,t.any=!0),"reference"in n&&e!==this._lastReference&&(t.reference=!0,t.any=!0)}return this._lastValue="structure"in n?clone(e):"shallowStructure"in n?clone(e,!0,1):e,this._lastReference=e,this._lastKeys=r,t},module.exports=WhatChanged;

},{"clone":4,"cyclic-deep-equal":5}]},{},[2]);
